{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "segment-layout",
  "type": "registry:component",
  "description": "A segment layout component for shadcn/ui. Easily create a segment layout with left and right items and a content area",
  "dependencies": [
    "motion",
    "clsx"
  ],
  "files": [
    {
      "path": "registry/new-york/components/segment-layout.tsx",
      "content": "\"use client\";\r\n\r\nimport React, {\r\n    createContext,\r\n    forwardRef,\r\n    useCallback,\r\n    useContext,\r\n    useEffect,\r\n    useImperativeHandle,\r\n    useMemo,\r\n    useRef,\r\n    useState,\r\n} from \"react\";\r\n\r\nimport { AnimatePresence, motion } from \"motion/react\";\r\nimport type { ClassValue } from \"clsx\";\r\n\r\nimport { cn } from \"@/shadcn/lib/utils\";\r\n\r\ninterface SegmentLayoutContextValue {\r\n    active: string;\r\n    isActive: (value?: string) => boolean;\r\n    setActive: React.Dispatch<React.SetStateAction<string>>;\r\n}\r\n\r\nconst SegmentLayoutContext = createContext<SegmentLayoutContextValue>({\r\n    active: \"\",\r\n    isActive: () => false,\r\n    setActive: () => {},\r\n});\r\n\r\nconst useSegmentLayout = () => {\r\n    const context = useContext(SegmentLayoutContext);\r\n    if (!context) {\r\n        throw new Error(\r\n            \"useSegmentLayout must be used within a SegmentLayoutProvider\",\r\n        );\r\n    }\r\n    return context;\r\n};\r\n\r\ntype ItemType = {\r\n    label: string;\r\n    value: string;\r\n    icon?: React.ReactNode;\r\n    disabled?: boolean;\r\n    onClick?: () => void;\r\n};\r\n\r\ntype ClassNamesType = {\r\n    mainWrapper?: ClassValue;\r\n    itemsWrapper?: ClassValue;\r\n    leftWrapper?: ClassValue;\r\n    rightWrapper?: ClassValue;\r\n    contentWrapper?: ClassValue;\r\n    item?: ClassValue;\r\n    disabledItem?: ClassValue;\r\n    leftItem?: ClassValue;\r\n    rightItem?: ClassValue;\r\n    activeItem?: ClassValue;\r\n    activeLeftItem?: ClassValue;\r\n    activeRightItem?: ClassValue;\r\n    disabledLeftItem?: ClassValue;\r\n    disabledRightItem?: ClassValue;\r\n};\r\n\r\ninterface SegmentLayoutProps {\r\n    /** @public (required) - The left side items of the segment layout */\r\n    leftItems: ItemType[];\r\n    /** @public (required) - The right side items of the segment layout */\r\n    rightItems: ItemType[];\r\n    /** @public (required) - The content of the segment layout */\r\n    children: React.ReactNode;\r\n    /** @public (optional) - The className of the segment layout */\r\n    defaultValue?: string;\r\n    /** @public (optional) - The className of the segment layout container */\r\n    classNames?: ClassNamesType;\r\n}\r\n\r\ninterface SegmentLayoutRef extends SegmentLayoutContextValue {}\r\n\r\nconst SegmentLayoutProvider = (\r\n    props: Pick<SegmentLayoutProps, \"defaultValue\" | \"children\">,\r\n) => {\r\n    const [active, setActive] = useState(props.defaultValue ?? \"\");\r\n\r\n    const isActive = useCallback(\r\n        (value?: string) => {\r\n            return value ? active === value : active !== \"\";\r\n        },\r\n        [active],\r\n    );\r\n\r\n    const contextValue = useMemo(\r\n        () => ({ active, setActive, isActive }),\r\n        [active, isActive],\r\n    );\r\n\r\n    return (\r\n        <SegmentLayoutContext.Provider value={contextValue}>\r\n            {props.children}\r\n        </SegmentLayoutContext.Provider>\r\n    );\r\n};\r\n\r\nconst SegmentLayoutContentInner = forwardRef<\r\n    SegmentLayoutRef,\r\n    Pick<\r\n        SegmentLayoutProps,\r\n        \"leftItems\" | \"rightItems\" | \"children\" | \"classNames\" | \"defaultValue\"\r\n    >\r\n>(({ leftItems, rightItems, children, classNames, defaultValue }, ref) => {\r\n    const [height, setHeight] = useState<number>(160);\r\n\r\n    const { active, isActive, setActive } = useSegmentLayout();\r\n\r\n    const contentRef = useRef<HTMLDivElement>(null);\r\n    const resizeObserverRef = useRef<ResizeObserver | null>(null);\r\n\r\n    useImperativeHandle(ref, () => ({\r\n        active,\r\n        isActive,\r\n        setActive,\r\n    }));\r\n\r\n    useEffect(() => {\r\n        if (defaultValue) return;\r\n\r\n        const firstItem = leftItems[0] || rightItems[0];\r\n        if (firstItem) {\r\n            setActive(firstItem.value);\r\n        }\r\n    }, [defaultValue, leftItems, rightItems, setActive]);\r\n\r\n    const contentRefCallback = useCallback((node: HTMLDivElement | null) => {\r\n        if (resizeObserverRef.current) {\r\n            resizeObserverRef.current.disconnect();\r\n            resizeObserverRef.current = null;\r\n        }\r\n\r\n        if (!node) {\r\n            contentRef.current = null;\r\n            return;\r\n        }\r\n\r\n        contentRef.current = node;\r\n\r\n        const initialHeight = node.scrollHeight;\r\n        if (initialHeight > 0) {\r\n            setHeight(initialHeight);\r\n        }\r\n\r\n        const resizeObserver = new ResizeObserver((entries) => {\r\n            for (const entry of entries) {\r\n                const newHeight = entry.contentRect.height;\r\n                if (newHeight > 0) {\r\n                    setHeight(newHeight);\r\n                }\r\n            }\r\n        });\r\n\r\n        resizeObserver.observe(node);\r\n        resizeObserverRef.current = resizeObserver;\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n            if (resizeObserverRef.current) {\r\n                resizeObserverRef.current.disconnect();\r\n                resizeObserverRef.current = null;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    if (!active) return null;\r\n\r\n    return (\r\n        <div\r\n            data-slot=\"segment-layout\"\r\n            data-active={active}\r\n            className={cn(\r\n                \"flex w-full items-center justify-center gap-8 p-4 sm:p-6\",\r\n                classNames?.mainWrapper,\r\n            )}\r\n        >\r\n            {/* Left Items */}\r\n            <ItemWrapper\r\n                position=\"left\"\r\n                items={leftItems}\r\n                className={cn(\r\n                    classNames?.itemsWrapper,\r\n                    classNames?.leftWrapper,\r\n                )}\r\n                classNames={{\r\n                    item: classNames?.item,\r\n                    disabledItem: classNames?.disabledItem,\r\n                    leftItem: classNames?.leftItem,\r\n                    activeItem: classNames?.activeItem,\r\n                    activeLeftItem: classNames?.activeLeftItem,\r\n                    disabledLeftItem: classNames?.disabledLeftItem,\r\n                }}\r\n            />\r\n\r\n            {/* Content Wrapper */}\r\n            <AnimatePresence mode=\"wait\">\r\n                <motion.main\r\n                    data-slot=\"segment-layout-content\"\r\n                    animate={{ height }}\r\n                    className={cn(\r\n                        \"flex-1 max-w-2xl flex items-center bg-card justify-center w-full min-h-40 rounded-lg border shadow-lg overflow-hidden\",\r\n                        classNames?.contentWrapper,\r\n                    )}\r\n                    transition={{\r\n                        height: {\r\n                            duration: 0.2,\r\n                            ease: \"linear\",\r\n                        },\r\n                    }}\r\n                >\r\n                    <div ref={contentRefCallback} className=\"w-full\">\r\n                        {React.Children.map(children, (child) => {\r\n                            if (!React.isValidElement(child)) return null;\r\n\r\n                            const childElement =\r\n                                child as React.ReactElement<SegmentLayoutContentProps>;\r\n\r\n                            if (childElement.props.value !== active)\r\n                                return null;\r\n\r\n                            return (\r\n                                <motion.div\r\n                                    key={childElement.props.value}\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    exit={{ opacity: 0, y: -10 }}\r\n                                    transition={{\r\n                                        opacity: {\r\n                                            duration: 0.3,\r\n                                            ease: [0.4, 0, 0.2, 1],\r\n                                        },\r\n                                        y: {\r\n                                            duration: 0.3,\r\n                                            ease: [0.4, 0, 0.2, 1],\r\n                                        },\r\n                                    }}\r\n                                    style={{ width: \"100%\" }}\r\n                                >\r\n                                    {child}\r\n                                </motion.div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </motion.main>\r\n            </AnimatePresence>\r\n\r\n            {/* Right Items */}\r\n            <ItemWrapper\r\n                position=\"right\"\r\n                items={rightItems}\r\n                className={cn(\r\n                    classNames?.itemsWrapper,\r\n                    classNames?.rightWrapper,\r\n                )}\r\n                classNames={{\r\n                    item: classNames?.item,\r\n                    disabledItem: classNames?.disabledItem,\r\n                    rightItem: classNames?.rightItem,\r\n                    activeItem: classNames?.activeItem,\r\n                    activeRightItem: classNames?.activeRightItem,\r\n                    disabledRightItem: classNames?.disabledRightItem,\r\n                }}\r\n            />\r\n        </div>\r\n    );\r\n});\r\n\r\nSegmentLayoutContentInner.displayName = \"SegmentLayoutContentInner\";\r\n\r\nconst SegmentLayout = forwardRef<SegmentLayoutRef, SegmentLayoutProps>(\r\n    ({ children, classNames, leftItems, rightItems, ...props }, ref) => {\r\n        return (\r\n            <SegmentLayoutProvider {...props}>\r\n                <SegmentLayoutContentInner\r\n                    ref={ref}\r\n                    leftItems={leftItems}\r\n                    rightItems={rightItems}\r\n                    classNames={classNames}\r\n                >\r\n                    {children}\r\n                </SegmentLayoutContentInner>\r\n            </SegmentLayoutProvider>\r\n        );\r\n    },\r\n);\r\n\r\ntype SegmentLayoutContentProps = React.HTMLAttributes<HTMLDivElement> & {\r\n    value: string;\r\n    children: React.ReactNode;\r\n};\r\n\r\nconst SegmentLayoutContent: React.FC<SegmentLayoutContentProps> = ({\r\n    value,\r\n    className,\r\n    ...props\r\n}) => {\r\n    return (\r\n        <div\r\n            data-slot=\"segment-layout-content\"\r\n            data-active={value}\r\n            className={cn(\r\n                \"flex-1 flex items-center justify-center w-full\",\r\n                className,\r\n            )}\r\n            {...(props as React.HTMLAttributes<HTMLDivElement>)}\r\n        />\r\n    );\r\n};\r\n\r\nconst ItemWrapper: React.FC<{\r\n    position: \"left\" | \"right\";\r\n    items: ItemType[];\r\n    className?: ClassValue;\r\n    classNames?: Omit<ClassNamesType, \"mainWrapper\" | \"contentWrapper\">;\r\n}> = ({ classNames, className, position, items }) => {\r\n    const { isActive, setActive } = useSegmentLayout();\r\n\r\n    const getItemClassName = (item: { disabled?: boolean; value: string }) => {\r\n        const baseClass = classNames?.item;\r\n        const activeClass = isActive(item.value)\r\n            ? classNames?.activeItem\r\n            : undefined;\r\n        const disabledClass = item.disabled\r\n            ? classNames?.disabledItem\r\n            : undefined;\r\n        const activePositionClass =\r\n            position === \"left\"\r\n                ? classNames?.activeLeftItem\r\n                : classNames?.activeRightItem;\r\n        const disabledPositionClass =\r\n            position === \"left\"\r\n                ? classNames?.disabledLeftItem\r\n                : classNames?.disabledRightItem;\r\n\r\n        return cn(\r\n            baseClass,\r\n            activeClass,\r\n            activePositionClass && isActive(item.value) && activePositionClass,\r\n            disabledClass,\r\n            disabledPositionClass && item.disabled && disabledPositionClass,\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div\r\n            data-slot=\"segment-layout-items\"\r\n            className={cn(\"flex flex-col gap-3 w-72 shrink-0\", className)}\r\n        >\r\n            {items.map((item) => (\r\n                <Item\r\n                    key={item.value}\r\n                    {...item}\r\n                    position={position}\r\n                    className={getItemClassName(item)}\r\n                    onClick={() => {\r\n                        if (!item.disabled) {\r\n                            setActive(item.value);\r\n                            item.onClick?.();\r\n                        }\r\n                    }}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Item: React.FC<{\r\n    label: string;\r\n    value: string;\r\n    icon?: React.ReactNode;\r\n    disabled?: boolean;\r\n    onClick?: () => void;\r\n    className?: ClassValue;\r\n    position: \"left\" | \"right\";\r\n}> = ({ label, icon, value, disabled, onClick, className, position }) => {\r\n    const { isActive } = useSegmentLayout();\r\n\r\n    return (\r\n        <motion.button\r\n            data-slot=\"segment-layout-item\"\r\n            data-position={position}\r\n            data-active={isActive(value)}\r\n            data-disabled={disabled}\r\n            data-value={value}\r\n            data-label={label}\r\n            aria-label={label}\r\n            aria-disabled={disabled}\r\n            aria-pressed={isActive(value)}\r\n            type=\"button\"\r\n            onClick={onClick}\r\n            disabled={disabled}\r\n            style={{\r\n                fontWeight: isActive(value) ? \"bold\" : \"normal\",\r\n            }}\r\n            whileTap={{\r\n                scale: 0.95,\r\n            }}\r\n            transition={{\r\n                type: \"spring\",\r\n                duration: 0.3,\r\n                ease: [0.4, 0, 0.2, 1],\r\n                stiffness: 200,\r\n                damping: 10,\r\n            }}\r\n            className={cn(\r\n                \"flex items-center gap-2 w-full flex-1 bg-primary text-primary-foreground p-4 rounded-lg\",\r\n                \"transition-colors duration-300 ease-in-out text-sm\",\r\n                position === \"right\" ? \"justify-end\" : \"justify-start\",\r\n                isActive(value) &&\r\n                    \"bg-card text-card-foreground border shadow-lg\",\r\n                disabled && \"opacity-50 cursor-not-allowed\",\r\n                className,\r\n            )}\r\n        >\r\n            {position === \"left\" && icon && icon}\r\n            {label}\r\n            {position === \"right\" && icon && icon}\r\n        </motion.button>\r\n    );\r\n};\r\n\r\nexport {\r\n    SegmentLayout,\r\n    type SegmentLayoutRef,\r\n    type SegmentLayoutProps,\r\n    SegmentLayoutContent,\r\n};\r\n",
      "type": "registry:ui"
    }
  ]
}