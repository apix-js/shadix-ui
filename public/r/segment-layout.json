{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "segment-layout",
  "type": "registry:component",
  "description": "A segment layout component for shadcn/ui. Easily create a segment layout with left and right items and a content area",
  "dependencies": [
    "motion",
    "clsx"
  ],
  "files": [
    {
      "path": "registry/new-york/components/segment-layout.tsx",
      "content": "\"use client\";\n\nimport React, {\n    createContext,\n    forwardRef,\n    useCallback,\n    useContext,\n    useEffect,\n    useImperativeHandle,\n    useMemo,\n    useRef,\n    useState,\n} from \"react\";\n\nimport { AnimatePresence, motion } from \"motion/react\";\nimport type { ClassValue } from \"clsx\";\n\nimport { cn } from \"@/shadcn/lib/utils\";\n\ninterface SegmentLayoutContextValue {\n    active: string;\n    isActive: (value?: string) => boolean;\n    setActive: React.Dispatch<React.SetStateAction<string>>;\n}\n\nconst SegmentLayoutContext = createContext<SegmentLayoutContextValue>({\n    active: \"\",\n    isActive: () => false,\n    setActive: () => {},\n});\n\nconst useSegmentLayout = () => {\n    const context = useContext(SegmentLayoutContext);\n    if (!context) {\n        throw new Error(\n            \"useSegmentLayout must be used within a SegmentLayoutProvider\",\n        );\n    }\n    return context;\n};\n\ntype ItemType = {\n    label: string;\n    value: string;\n    icon?: React.ReactNode;\n    disabled?: boolean;\n    onClick?: () => void;\n};\n\ntype ClassNamesType = {\n    mainWrapper?: ClassValue;\n    itemsWrapper?: ClassValue;\n    leftWrapper?: ClassValue;\n    rightWrapper?: ClassValue;\n    contentWrapper?: ClassValue;\n    item?: ClassValue;\n    disabledItem?: ClassValue;\n    leftItem?: ClassValue;\n    rightItem?: ClassValue;\n    activeItem?: ClassValue;\n    activeLeftItem?: ClassValue;\n    activeRightItem?: ClassValue;\n    disabledLeftItem?: ClassValue;\n    disabledRightItem?: ClassValue;\n};\n\ninterface SegmentLayoutProps {\n    /** @public (required) - The left side items of the segment layout */\n    leftItems: ItemType[];\n    /** @public (required) - The right side items of the segment layout */\n    rightItems: ItemType[];\n    /** @public (required) - The content of the segment layout */\n    children: React.ReactNode;\n    /** @public (optional) - The className of the segment layout */\n    defaultValue?: string;\n    /** @public (optional) - The className of the segment layout container */\n    classNames?: ClassNamesType;\n}\n\ninterface SegmentLayoutRef extends SegmentLayoutContextValue {}\n\nconst SegmentLayoutProvider = (\n    props: Pick<SegmentLayoutProps, \"defaultValue\" | \"children\">,\n) => {\n    const [active, setActive] = useState(props.defaultValue ?? \"\");\n\n    const isActive = useCallback(\n        (value?: string) => {\n            return value ? active === value : active !== \"\";\n        },\n        [active],\n    );\n\n    const contextValue = useMemo(\n        () => ({ active, setActive, isActive }),\n        [active, isActive],\n    );\n\n    return (\n        <SegmentLayoutContext.Provider value={contextValue}>\n            {props.children}\n        </SegmentLayoutContext.Provider>\n    );\n};\n\nconst SegmentLayoutContentInner = forwardRef<\n    SegmentLayoutRef,\n    Pick<\n        SegmentLayoutProps,\n        \"leftItems\" | \"rightItems\" | \"children\" | \"classNames\" | \"defaultValue\"\n    >\n>(({ leftItems, rightItems, children, classNames, defaultValue }, ref) => {\n    const [height, setHeight] = useState<number>(160);\n\n    const { active, isActive, setActive } = useSegmentLayout();\n\n    const contentRef = useRef<HTMLDivElement>(null);\n    const resizeObserverRef = useRef<ResizeObserver | null>(null);\n\n    useImperativeHandle(ref, () => ({\n        active,\n        isActive,\n        setActive,\n    }));\n\n    useEffect(() => {\n        if (defaultValue) return;\n\n        const firstItem = leftItems[0] || rightItems[0];\n        if (firstItem) {\n            setActive(firstItem.value);\n        }\n    }, [defaultValue, leftItems, rightItems, setActive]);\n\n    const contentRefCallback = useCallback((node: HTMLDivElement | null) => {\n        if (resizeObserverRef.current) {\n            resizeObserverRef.current.disconnect();\n            resizeObserverRef.current = null;\n        }\n\n        if (!node) {\n            contentRef.current = null;\n            return;\n        }\n\n        contentRef.current = node;\n\n        const initialHeight = node.scrollHeight;\n        if (initialHeight > 0) {\n            setHeight(initialHeight);\n        }\n\n        const resizeObserver = new ResizeObserver((entries) => {\n            for (const entry of entries) {\n                const newHeight = entry.contentRect.height;\n                if (newHeight > 0) {\n                    setHeight(newHeight);\n                }\n            }\n        });\n\n        resizeObserver.observe(node);\n        resizeObserverRef.current = resizeObserver;\n    }, []);\n\n    useEffect(() => {\n        return () => {\n            if (resizeObserverRef.current) {\n                resizeObserverRef.current.disconnect();\n                resizeObserverRef.current = null;\n            }\n        };\n    }, []);\n\n    if (!active) return null;\n\n    return (\n        <div\n            data-slot=\"segment-layout\"\n            data-active={active}\n            className={cn(\n                \"flex w-full items-center justify-center gap-8 p-4 sm:p-6\",\n                classNames?.mainWrapper,\n            )}\n        >\n            {/* Left Items */}\n            <ItemWrapper\n                position=\"left\"\n                items={leftItems}\n                className={cn(\n                    classNames?.itemsWrapper,\n                    classNames?.leftWrapper,\n                )}\n                classNames={{\n                    item: classNames?.item,\n                    disabledItem: classNames?.disabledItem,\n                    leftItem: classNames?.leftItem,\n                    activeItem: classNames?.activeItem,\n                    activeLeftItem: classNames?.activeLeftItem,\n                    disabledLeftItem: classNames?.disabledLeftItem,\n                }}\n            />\n\n            {/* Content Wrapper */}\n            <AnimatePresence mode=\"wait\">\n                <motion.main\n                    data-slot=\"segment-layout-content\"\n                    animate={{ height }}\n                    className={cn(\n                        \"flex-1 max-w-2xl flex items-center bg-card justify-center w-full min-h-40 rounded-lg border shadow-lg overflow-hidden\",\n                        classNames?.contentWrapper,\n                    )}\n                    transition={{\n                        height: {\n                            duration: 0.2,\n                            ease: \"linear\",\n                        },\n                    }}\n                >\n                    <div ref={contentRefCallback} className=\"w-full\">\n                        {React.Children.map(children, (child) => {\n                            if (!React.isValidElement(child)) return null;\n\n                            const childElement =\n                                child as React.ReactElement<SegmentLayoutContentProps>;\n\n                            if (childElement.props.value !== active)\n                                return null;\n\n                            return (\n                                <motion.div\n                                    key={childElement.props.value}\n                                    initial={{ opacity: 0, y: 10 }}\n                                    animate={{ opacity: 1, y: 0 }}\n                                    exit={{ opacity: 0, y: -10 }}\n                                    transition={{\n                                        opacity: {\n                                            duration: 0.3,\n                                            ease: [0.4, 0, 0.2, 1],\n                                        },\n                                        y: {\n                                            duration: 0.3,\n                                            ease: [0.4, 0, 0.2, 1],\n                                        },\n                                    }}\n                                    style={{ width: \"100%\" }}\n                                >\n                                    {child}\n                                </motion.div>\n                            );\n                        })}\n                    </div>\n                </motion.main>\n            </AnimatePresence>\n\n            {/* Right Items */}\n            <ItemWrapper\n                position=\"right\"\n                items={rightItems}\n                className={cn(\n                    classNames?.itemsWrapper,\n                    classNames?.rightWrapper,\n                )}\n                classNames={{\n                    item: classNames?.item,\n                    disabledItem: classNames?.disabledItem,\n                    rightItem: classNames?.rightItem,\n                    activeItem: classNames?.activeItem,\n                    activeRightItem: classNames?.activeRightItem,\n                    disabledRightItem: classNames?.disabledRightItem,\n                }}\n            />\n        </div>\n    );\n});\n\nSegmentLayoutContentInner.displayName = \"SegmentLayoutContentInner\";\n\nconst SegmentLayout = forwardRef<SegmentLayoutRef, SegmentLayoutProps>(\n    ({ children, classNames, leftItems, rightItems, ...props }, ref) => {\n        return (\n            <SegmentLayoutProvider {...props}>\n                <SegmentLayoutContentInner\n                    ref={ref}\n                    leftItems={leftItems}\n                    rightItems={rightItems}\n                    classNames={classNames}\n                >\n                    {children}\n                </SegmentLayoutContentInner>\n            </SegmentLayoutProvider>\n        );\n    },\n);\n\ntype SegmentLayoutContentProps = React.HTMLAttributes<HTMLDivElement> & {\n    value: string;\n    children: React.ReactNode;\n};\n\nconst SegmentLayoutContent: React.FC<SegmentLayoutContentProps> = ({\n    value,\n    className,\n    ...props\n}) => {\n    return (\n        <div\n            data-slot=\"segment-layout-content\"\n            data-active={value}\n            className={cn(\n                \"flex-1 flex items-center justify-center w-full\",\n                className,\n            )}\n            {...(props as React.HTMLAttributes<HTMLDivElement>)}\n        />\n    );\n};\n\nconst ItemWrapper: React.FC<{\n    position: \"left\" | \"right\";\n    items: ItemType[];\n    className?: ClassValue;\n    classNames?: Omit<ClassNamesType, \"mainWrapper\" | \"contentWrapper\">;\n}> = ({ classNames, className, position, items }) => {\n    const { isActive, setActive } = useSegmentLayout();\n\n    const getItemClassName = (item: { disabled?: boolean; value: string }) => {\n        const baseClass = classNames?.item;\n        const activeClass = isActive(item.value)\n            ? classNames?.activeItem\n            : undefined;\n        const disabledClass = item.disabled\n            ? classNames?.disabledItem\n            : undefined;\n        const activePositionClass =\n            position === \"left\"\n                ? classNames?.activeLeftItem\n                : classNames?.activeRightItem;\n        const disabledPositionClass =\n            position === \"left\"\n                ? classNames?.disabledLeftItem\n                : classNames?.disabledRightItem;\n\n        return cn(\n            baseClass,\n            activeClass,\n            activePositionClass && isActive(item.value) && activePositionClass,\n            disabledClass,\n            disabledPositionClass && item.disabled && disabledPositionClass,\n        );\n    };\n\n    return (\n        <div\n            data-slot=\"segment-layout-items\"\n            className={cn(\"flex flex-col gap-3 w-72 shrink-0\", className)}\n        >\n            {items.map((item) => (\n                <Item\n                    key={item.value}\n                    {...item}\n                    position={position}\n                    className={getItemClassName(item)}\n                    onClick={() => {\n                        if (!item.disabled) {\n                            setActive(item.value);\n                            item.onClick?.();\n                        }\n                    }}\n                />\n            ))}\n        </div>\n    );\n};\n\nconst Item: React.FC<{\n    label: string;\n    value: string;\n    icon?: React.ReactNode;\n    disabled?: boolean;\n    onClick?: () => void;\n    className?: ClassValue;\n    position: \"left\" | \"right\";\n}> = ({ label, icon, value, disabled, onClick, className, position }) => {\n    const { isActive } = useSegmentLayout();\n\n    return (\n        <motion.button\n            data-slot=\"segment-layout-item\"\n            data-position={position}\n            data-active={isActive(value)}\n            data-disabled={disabled}\n            data-value={value}\n            data-label={label}\n            aria-label={label}\n            aria-disabled={disabled}\n            aria-pressed={isActive(value)}\n            type=\"button\"\n            onClick={onClick}\n            disabled={disabled}\n            style={{\n                fontWeight: isActive(value) ? \"bold\" : \"normal\",\n            }}\n            whileTap={{\n                scale: 0.95,\n            }}\n            transition={{\n                type: \"spring\",\n                duration: 0.3,\n                ease: [0.4, 0, 0.2, 1],\n                stiffness: 200,\n                damping: 10,\n            }}\n            className={cn(\n                \"flex items-center gap-2 w-full flex-1 bg-primary text-primary-foreground p-4 rounded-lg\",\n                \"transition-colors duration-300 ease-in-out text-sm\",\n                position === \"right\" ? \"justify-end\" : \"justify-start\",\n                isActive(value) &&\n                    \"bg-card text-card-foreground border shadow-lg\",\n                disabled && \"opacity-50 cursor-not-allowed\",\n                className,\n            )}\n        >\n            {position === \"left\" && icon && icon}\n            {label}\n            {position === \"right\" && icon && icon}\n        </motion.button>\n    );\n};\n\nexport {\n    SegmentLayout,\n    type SegmentLayoutRef,\n    type SegmentLayoutProps,\n    SegmentLayoutContent,\n};\n",
      "type": "registry:ui"
    }
  ]
}